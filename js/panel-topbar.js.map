{"version":3,"file":"panel-topbar.js","names":["window","addEventListener","e","console","log","dataTransfer","dropEffect","target","test","type","PS","dragging","preventDefault","PSHeader","_preact$Component","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","handleDragEnter","currentTarget","draggingRoom","roomid","draggedOverRoom","router","extractRoomID","href","leftIndex","leftRoomList","indexOf","dragOnto","rightIndex","rightRoomList","handleDragStart","_proto","prototype","fromRoom","toRoomList","toIndex","roomLists","fromRoomList","fromIndex","_i2","roomList","splice","room","rooms","location","leftRoom","id","mainmenu","rightRoom","update","renderRoomTab","closable","cur","isVisible","notifying","notifications","isSubtleNotifying","className","icon","title","closeButton","preact","h","style","idChunks","substr","split","formatid","_battle$p","_battle$p2","battle","p1","name","p2","charAt","closeBracketIndex","slice","value","draggable","onDragEnter","onDragStart","renderUser","connected","disabled","user","userid","named","userColor","BattleLog","color","usernameColor","render","_this2","props","src","Config","routes","client","srcset","alt","width","height","map","marginLeft","leftRoomWidth","prefs","mute","Component","PSMain","document","body","getElementById","UserRoom","_PSRoom","options","_this3","classType","isSelf","username","send","PSRoom","UserPanel","_PSRoomPanel","_proto2","userdetailsCache","avatar","group","server","getGroup","groupName","globalGroup","globalGroupName","roomsList","battlebuf","chatbuf","privatebuf","curRoom","roomrank","toRoomid","ownBattle","toUserid","roomLink","isPrivate","push","unshift","away","status","startsWith","PSPanelWrapper","Dex","resolveAvatar","users","customgroup","PSRoomPanel","roomTypes","Model","VolumePanel","_PSRoomPanel2","_this4","_len2","_key2","setVolume","slider","set","Number","forceUpdate","setMute","checkbox","checked","_proto3","componentDidMount","_this5","subscriptions","subscribe","effectvolume","min","max","step","onChange","onInput","onKeyUp","musicvolume","notifvolume","OptionsPanel","_PSRoomPanel3","_this6","_len3","_key3","setTheme","theme","_proto4","selected"],"sources":["../src/panel-topbar.tsx"],"sourcesContent":["/**\r\n * Topbar Panel\r\n *\r\n * Topbar view - handles the topbar and some generic popups.\r\n *\r\n * Also handles global drag-and-drop support.\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license AGPLv3\r\n */\r\n\r\nwindow.addEventListener('drop', e => {\r\n\tconsole.log('drop ' + e.dataTransfer!.dropEffect);\r\n\tconst target = e.target as HTMLElement;\r\n\tif (/^text/.test((target as HTMLInputElement).type)) {\r\n\t\tPS.dragging = null;\r\n\t\treturn; // Ignore text fields\r\n\t}\r\n\r\n\t// The default team drop action for Firefox is to open the team as a\r\n\t// URL, which needs to be prevented.\r\n\t// The default file drop action for most browsers is to open the file\r\n\t// in the tab, which is generally undesirable anyway.\r\n\te.preventDefault();\r\n\tPS.dragging = null;\r\n});\r\nwindow.addEventListener('dragend', e => {\r\n\te.preventDefault();\r\n\tPS.dragging = null;\r\n});\r\nwindow.addEventListener('dragover', e => {\r\n\t// this prevents the bounce-back animation\r\n\te.preventDefault();\r\n});\r\n\r\nclass PSHeader extends preact.Component<{style: {}}> {\r\n\thandleDragEnter = (e: DragEvent) => {\r\n\t\tconsole.log('dragenter ' + e.dataTransfer!.dropEffect);\r\n\t\te.preventDefault();\r\n\t\tif (!PS.dragging) return; // TODO: handle dragging other things onto roomtabs\r\n\t\t/** the element being passed over */\r\n\t\tconst target = e.currentTarget as HTMLAnchorElement;\r\n\r\n\t\tconst draggingRoom = PS.dragging.roomid;\r\n\t\tif (draggingRoom === null) return;\r\n\r\n\t\tconst draggedOverRoom = PS.router.extractRoomID(target.href);\r\n\t\tif (draggedOverRoom === null) return; // should never happen\r\n\t\tif (draggingRoom === draggedOverRoom) return;\r\n\r\n\t\tconst leftIndex = PS.leftRoomList.indexOf(draggedOverRoom);\r\n\t\tif (leftIndex >= 0) {\r\n\t\t\tthis.dragOnto(draggingRoom, 'leftRoomList', leftIndex);\r\n\t\t} else {\r\n\t\t\tconst rightIndex = PS.rightRoomList.indexOf(draggedOverRoom);\r\n\t\t\tif (rightIndex >= 0) {\r\n\t\t\t\tthis.dragOnto(draggingRoom, 'rightRoomList', rightIndex);\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// dropEffect !== 'none' prevents bounce-back animation in\r\n\t\t// Chrome/Safari/Opera\r\n\t\t// if (e.dataTransfer) e.dataTransfer.dropEffect = 'move';\r\n\t};\r\n\thandleDragStart = (e: DragEvent) => {\r\n\t\tconst roomid = PS.router.extractRoomID((e.currentTarget as HTMLAnchorElement).href);\r\n\t\tif (!roomid) return; // should never happen\r\n\r\n\t\tPS.dragging = {type: 'room', roomid};\r\n\t};\r\n\tdragOnto(fromRoom: RoomID, toRoomList: 'leftRoomList' | 'rightRoomList' | 'miniRoomList', toIndex: number) {\r\n\t\t// one day you will be able to rearrange mainmenu and rooms, but not today\r\n\t\tif (fromRoom === '' || fromRoom === 'rooms') return;\r\n\r\n\t\tif (fromRoom === PS[toRoomList][toIndex]) return;\r\n\t\tif (fromRoom === '' && toRoomList === 'miniRoomList') return;\r\n\r\n\t\tconst roomLists = ['leftRoomList', 'rightRoomList', 'miniRoomList'] as const;\r\n\t\tlet fromRoomList;\r\n\t\tlet fromIndex = -1;\r\n\t\tfor (const roomList of roomLists) {\r\n\t\t\tfromIndex = PS[roomList].indexOf(fromRoom);\r\n\t\t\tif (fromIndex >= 0) {\r\n\t\t\t\tfromRoomList = roomList;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!fromRoomList) return; // shouldn't happen\r\n\r\n\t\tif (toRoomList === 'leftRoomList' && toIndex === 0) toIndex = 1; // Home is always leftmost\r\n\t\tif (toRoomList === 'rightRoomList' && toIndex === PS.rightRoomList.length - 1) toIndex--; // Rooms is always rightmost\r\n\r\n\t\tPS[fromRoomList].splice(fromIndex, 1);\r\n\t\t// if dragging within the same roomlist and toIndex > fromIndex,\r\n\t\t// toIndex is offset by 1 now. Fortunately for us, we want to\r\n\t\t// drag to the right of this tab in that case, so the -1 +1\r\n\t\t// cancel out\r\n\t\tPS[toRoomList].splice(toIndex, 0, fromRoom);\r\n\r\n\t\tconst room = PS.rooms[fromRoom]!;\r\n\t\tswitch (toRoomList) {\r\n\t\tcase 'leftRoomList': room.location = 'left'; break;\r\n\t\tcase 'rightRoomList': room.location = 'right'; break;\r\n\t\tcase 'miniRoomList': room.location = 'mini-window'; break;\r\n\t\t}\r\n\t\tif (fromRoomList !== toRoomList) {\r\n\t\t\tif (fromRoom === PS.leftRoom.id) {\r\n\t\t\t\tPS.leftRoom = PS.mainmenu;\r\n\t\t\t} else if (PS.rightRoom && fromRoom === PS.rightRoom.id) {\r\n\t\t\t\tPS.rightRoom = PS.rooms['rooms']!;\r\n\t\t\t}\r\n\t\t\tif (toRoomList === 'rightRoomList') {\r\n\t\t\t\tPS.rightRoom = room;\r\n\t\t\t} else if (toRoomList === 'leftRoomList') {\r\n\t\t\t\tPS.leftRoom = room;\r\n\t\t\t}\r\n\t\t}\r\n\t\tPS.update();\r\n\t}\r\n\trenderRoomTab(id: RoomID) {\r\n\t\tconst room = PS.rooms[id]!;\r\n\t\tconst closable = (id === '' || id === 'rooms' ? '' : ' closable');\r\n\t\tconst cur = PS.isVisible(room) ? ' cur' : '';\r\n\t\tconst notifying = room.notifications.length ? ' notifying' : room.isSubtleNotifying ? ' subtle-notifying' : '';\r\n\t\tlet className = `roomtab button${notifying}${closable}${cur}`;\r\n\t\tlet icon = null;\r\n\t\tlet title = room.title;\r\n\t\tlet closeButton = null;\r\n\t\tswitch (room.type) {\r\n\t\tcase '':\r\n\t\tcase 'mainmenu':\r\n\t\t\ticon = <i class=\"fa fa-home\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'teambuilder':\r\n\t\t\ticon = <i class=\"fa fa-pencil-square-o\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'ladder':\r\n\t\tcase 'ladderformat':\r\n\t\t\ticon = <i class=\"fa fa-list-ol\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'battles':\r\n\t\t\ticon = <i class=\"fa fa-caret-square-o-right\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'rooms':\r\n\t\t\ticon = <i class=\"fa fa-plus\" style=\"margin:7px auto -6px auto\"></i>;\r\n\t\t\ttitle = '';\r\n\t\t\tbreak;\r\n\t\tcase 'battle':\r\n\t\t\tlet idChunks = id.substr(7).split('-');\r\n\t\t\tlet formatid;\r\n\t\t\t// TODO: relocate to room implementation\r\n\t\t\tif (idChunks.length <= 1) {\r\n\t\t\t\tif (idChunks[0] === 'uploadedreplay') formatid = 'Uploaded Replay';\r\n\t\t\t} else {\r\n\t\t\t\tformatid = idChunks[0];\r\n\t\t\t}\r\n\t\t\tif (!title) {\r\n\t\t\t\tlet battle = (room as any).battle as Battle | undefined;\r\n\t\t\t\tlet p1 = battle?.p1?.name || '';\r\n\t\t\t\tlet p2 = battle?.p2?.name || '';\r\n\t\t\t\tif (p1 && p2) {\r\n\t\t\t\t\ttitle = `${p1} v. ${p2}`;\r\n\t\t\t\t} else if (p1 || p2) {\r\n\t\t\t\t\ttitle = `${p1}${p2}`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttitle = `(empty room)`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ticon = <i class=\"text\">{formatid}</i>;\r\n\t\t\tbreak;\r\n\t\tcase 'chat':\r\n\t\t\ticon = <i class=\"fa fa-comment-o\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'html':\r\n\t\tdefault:\r\n\t\t\tif (title.charAt(0) === '[') {\r\n\t\t\t\tlet closeBracketIndex = title.indexOf(']');\r\n\t\t\t\tif (closeBracketIndex > 0) {\r\n\t\t\t\t\ticon = <i class=\"text\">{title.slice(1, closeBracketIndex)}</i>;\r\n\t\t\t\t\ttitle = title.slice(closeBracketIndex + 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ticon = <i class=\"fa fa-file-text-o\"></i>;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif (closable) {\r\n\t\t\tcloseButton = <button class=\"closebutton\" name=\"closeRoom\" value={id} aria-label=\"Close\">\r\n\t\t\t\t<i class=\"fa fa-times-circle\"></i>\r\n\t\t\t</button>;\r\n\t\t}\r\n\t\treturn <li>\r\n\t\t\t<a\r\n\t\t\t\tclass={className} href={`/${id}`} draggable={true}\r\n\t\t\t\tonDragEnter={this.handleDragEnter} onDragStart={this.handleDragStart}\r\n\t\t\t>\r\n\t\t\t\t{icon} <span>{title}</span>\r\n\t\t\t</a>\r\n\t\t\t{closeButton}\r\n\t\t</li>;\r\n\t}\r\n\trenderUser() {\r\n\t\tif (!PS.connected) {\r\n\t\t\treturn <button class=\"button disabled\" disabled><em>Offline</em></button>;\r\n\t\t}\r\n\t\tif (!PS.user.userid) {\r\n\t\t\treturn <button class=\"button disabled\" disabled><em>Connecting...</em></button>;\r\n\t\t}\r\n\t\tif (!PS.user.named) {\r\n\t\t\treturn <a class=\"button\" href=\"login\">Choose name</a>;\r\n\t\t}\r\n\t\tconst userColor = window.BattleLog && {color: BattleLog.usernameColor(PS.user.userid)};\r\n\t\treturn <span class=\"username\" data-name={PS.user.name} style={userColor}>\r\n\t\t\t<i class=\"fa fa-user\" style=\"color:#779EC5\"></i> {PS.user.name}\r\n\t\t</span>;\r\n\t}\r\n\trender() {\r\n\t\treturn <div id=\"header\" class=\"header\" style={this.props.style}>\r\n\t\t\t<img\r\n\t\t\t\tclass=\"logo\"\r\n\t\t\t\tsrc={`https://${Config.routes.client}/pokemonshowdownbeta.png`}\r\n\t\t\t\tsrcset={`https://${Config.routes.client}/pokemonshowdownbeta@2x.png 2x`}\r\n\t\t\t\talt=\"Pokémon Showdown! (beta)\"\r\n\t\t\t\twidth=\"146\" height=\"44\"\r\n\t\t\t/>\r\n\t\t\t<div class=\"maintabbarbottom\"></div>\r\n\t\t\t<div class=\"tabbar maintabbar\"><div class=\"inner\">\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t{this.renderRoomTab(PS.leftRoomList[0])}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t{PS.leftRoomList.slice(1).map(roomid => this.renderRoomTab(roomid))}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul class=\"siderooms\" style={{float: 'none', marginLeft: PS.leftRoomWidth - 144}}>\r\n\t\t\t\t\t{PS.rightRoomList.map(roomid => this.renderRoomTab(roomid))}\r\n\t\t\t\t</ul>\r\n\t\t\t</div></div>\r\n\t\t\t<div class=\"userbar\">\r\n\t\t\t\t{this.renderUser()} {}\r\n\t\t\t\t<button class=\"icon button\" name=\"joinRoom\" value=\"volume\" title=\"Sound\" aria-label=\"Sound\">\r\n\t\t\t\t\t<i class={PS.prefs.mute ? 'fa fa-volume-off' : 'fa fa-volume-up'}></i>\r\n\t\t\t\t</button> {}\r\n\t\t\t\t<button class=\"icon button\" name=\"joinRoom\" value=\"options\" title=\"Options\" aria-label=\"Options\">\r\n\t\t\t\t\t<i class=\"fa fa-cog\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\npreact.render(<PSMain />, document.body, document.getElementById('ps-frame')!);\r\n\r\n/**\r\n * User popup\r\n */\r\n\r\nclass UserRoom extends PSRoom {\r\n\treadonly classType = 'user';\r\n\tuserid: ID;\r\n\tname: string;\r\n\tisSelf: boolean;\r\n\tconstructor(options: RoomOptions) {\r\n\t\tsuper(options);\r\n\t\tthis.userid = this.id.slice(5) as ID;\r\n\t\tthis.isSelf = (this.userid === PS.user.userid);\r\n\t\tthis.name = options.username as string || this.userid;\r\n\t\tif (/[a-zA-Z0-9]/.test(this.name.charAt(0))) this.name = ' ' + this.name;\r\n\t\tPS.send(`|/cmd userdetails ${this.userid}`);\r\n\t}\r\n}\r\n\r\nclass UserPanel extends PSRoomPanel<UserRoom> {\r\n\trender() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst user = PS.mainmenu.userdetailsCache[room.userid] || {userid: room.userid, avatar: '[loading]'};\r\n\t\tconst name = room.name.slice(1);\r\n\r\n\t\tconst group = PS.server.getGroup(room.name);\r\n\t\tlet groupName: preact.ComponentChild = group.name || null;\r\n\t\tif (group.type === 'punishment') {\r\n\t\t\tgroupName = <span style='color:#777777'>{groupName}</span>;\r\n\t\t}\r\n\r\n\t\tconst globalGroup = PS.server.getGroup(user.group);\r\n\t\tlet globalGroupName: preact.ComponentChild = globalGroup.name && `Global ${globalGroup.name}` || null;\r\n\t\tif (globalGroup.type === 'punishment') {\r\n\t\t\tglobalGroupName = <span style='color:#777777'>{globalGroupName}</span>;\r\n\t\t}\r\n\t\tif (globalGroup.name === group.name) groupName = null;\r\n\r\n\t\tlet roomsList: preact.ComponentChild = null;\r\n\t\tif (user.rooms) {\r\n\t\t\tlet battlebuf = [];\r\n\t\t\tlet chatbuf = [];\r\n\t\t\tlet privatebuf = [];\r\n\t\t\tfor (let roomid in user.rooms) {\r\n\t\t\t\tif (roomid === 'global') continue;\r\n\t\t\t\tconst curRoom = user.rooms[roomid];\r\n\t\t\t\tlet roomrank: preact.ComponentChild = null;\r\n\t\t\t\tif (!/[A-Za-z0-9]/.test(roomid.charAt(0))) {\r\n\t\t\t\t\troomrank = <small style=\"color: #888; font-size: 100%\">{roomid.charAt(0)}</small>;\r\n\t\t\t\t}\r\n\t\t\t\troomid = toRoomid(roomid);\r\n\r\n\t\t\t\tif (roomid.substr(0, 7) === 'battle-') {\r\n\t\t\t\t\tconst p1 = curRoom.p1!.substr(1);\r\n\t\t\t\t\tconst p2 = curRoom.p2!.substr(1);\r\n\t\t\t\t\tconst ownBattle = (PS.user.userid === toUserid(p1) || PS.user.userid === toUserid(p2));\r\n\t\t\t\t\tconst roomLink = <a href={`/${roomid}`} class={'ilink' + (ownBattle || roomid in PS.rooms ? ' yours' : '')}\r\n\t\t\t\t\t\ttitle={`${p1 || '?'} v. ${p2 || '?'}`}\r\n\t\t\t\t\t>{roomrank}{roomid.substr(7)}</a>;\r\n\t\t\t\t\tif (curRoom.isPrivate) {\r\n\t\t\t\t\t\tif (privatebuf.length) privatebuf.push(', ');\r\n\t\t\t\t\t\tprivatebuf.push(roomLink);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (battlebuf.length) battlebuf.push(', ');\r\n\t\t\t\t\t\tbattlebuf.push(roomLink);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst roomLink = <a href={`/${roomid}`} class={'ilink' + (roomid in PS.rooms ? ' yours' : '')}>\r\n\t\t\t\t\t\t{roomrank}{roomid}\r\n\t\t\t\t\t</a>;\r\n\t\t\t\t\tif (curRoom.isPrivate) {\r\n\t\t\t\t\t\tif (privatebuf.length) privatebuf.push(\", \");\r\n\t\t\t\t\t\tprivatebuf.push(roomLink);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (chatbuf.length) chatbuf.push(', ');\r\n\t\t\t\t\t\tchatbuf.push(roomLink);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (battlebuf.length) battlebuf.unshift(<br />, <em>Battles:</em>, \" \");\r\n\t\t\tif (chatbuf.length) chatbuf.unshift(<br />, <em>Chatrooms:</em>, \" \");\r\n\t\t\tif (privatebuf.length) privatebuf.unshift(<br />, <em>Private rooms:</em>, \" \");\r\n\t\t\tif (battlebuf.length || chatbuf.length || privatebuf.length) {\r\n\t\t\t\troomsList = <small class=\"rooms\">{battlebuf}{chatbuf}{privatebuf}</small>;\r\n\t\t\t}\r\n\t\t} else if (user.rooms === false) {\r\n\t\t\troomsList = <strong class=\"offline\">OFFLINE</strong>;\r\n\t\t}\r\n\r\n\t\tconst isSelf = user.userid === PS.user.userid;\r\n\t\tlet away = false;\r\n\t\tlet status = null;\r\n\t\tif (user.status) {\r\n\t\t\taway = user.status.startsWith('!');\r\n\t\t\tstatus = away ? user.status.slice(1) : user.status;\r\n\t\t}\r\n\r\n\t\treturn <PSPanelWrapper room={room}>\r\n\t\t\t<div class=\"userdetails\">\r\n\t\t\t\t{user.avatar !== '[loading]' &&\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclass={'trainersprite' + (room.isSelf ? ' yours' : '')}\r\n\t\t\t\t\t\tsrc={Dex.resolveAvatar('' + (user.avatar || 'unknown'))}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\t<strong><a href={`//${Config.routes.users}/${user.userid}`} target=\"_blank\" style={away ? {color: '#888888'} : null}>{name}</a></strong><br />\r\n\t\t\t\t{status && <div class=\"userstatus\">{status}</div>}\r\n\t\t\t\t{groupName && <div class=\"usergroup roomgroup\">{groupName}</div>}\r\n\t\t\t\t{globalGroupName && <div class=\"usergroup globalgroup\">{globalGroupName}</div>}\r\n\t\t\t\t{user.customgroup && <div class=\"usergroup globalgroup\">{user.customgroup}</div>}\r\n\t\t\t\t{roomsList}\r\n\t\t\t</div>\r\n\t\t\t{isSelf || !PS.user.named ?\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button disabled\" disabled>Challenge</button> {}\r\n\t\t\t\t\t<button class=\"button disabled\" disabled>Chat</button>\r\n\t\t\t\t</p>\r\n\t\t\t:\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button\" data-href={`/challenge-${user.userid}`}>Challenge</button> {}\r\n\t\t\t\t\t<button class=\"button\" data-href={`/pm-${user.userid}`}>Chat</button> {}\r\n\t\t\t\t\t<button class=\"button disabled\" name=\"userOptions\">{'\\u2026'}</button>\r\n\t\t\t\t</p>\r\n\t\t\t}\r\n\t\t\t{isSelf && <hr />}\r\n\t\t\t{isSelf && <p class=\"buttonbar\" style=\"text-align: right\">\r\n\t\t\t\t<button class=\"button disabled\" name=\"login\"><i class=\"fa fa-pencil\"></i> Change name</button> {}\r\n\t\t\t\t<button class=\"button\" name=\"cmd\" value=\"/logout\"><i class=\"fa fa-power-off\"></i> Log out</button>\r\n\t\t\t</p>}\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.roomTypes['user'] = {\r\n\tModel: UserRoom,\r\n\tComponent: UserPanel,\r\n};\r\n\r\nclass VolumePanel extends PSRoomPanel {\r\n\tsetVolume = (e: Event) => {\r\n\t\tconst slider = e.currentTarget as HTMLInputElement;\r\n\t\tPS.prefs.set(slider.name as 'effectvolume', Number(slider.value));\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tsetMute = (e: Event) => {\r\n\t\tconst checkbox = e.currentTarget as HTMLInputElement;\r\n\t\tPS.prefs.set('mute', !!checkbox.checked);\r\n\t\tPS.update();\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tsuper.componentDidMount();\r\n\t\tthis.subscriptions.push(PS.prefs.subscribe(() => {\r\n\t\t\tthis.forceUpdate();\r\n\t\t}));\r\n\t}\r\n\trender() {\r\n\t\tconst room = this.props.room;\r\n\t\treturn <PSPanelWrapper room={room}>\r\n\t\t\t<h3>Volume</h3>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">Effects: <span class=\"value\">{!PS.prefs.mute && PS.prefs.effectvolume ? `${PS.prefs.effectvolume}%` : `muted`}</span></label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"effectvolume\" value={PS.prefs.effectvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">Music: <span class=\"value\">{!PS.prefs.mute && PS.prefs.musicvolume ? `${PS.prefs.musicvolume}%` : `muted`}</span></label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"musicvolume\" value={PS.prefs.musicvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">Notifications: <span class=\"value\">{!PS.prefs.mute && PS.prefs.notifvolume ? `${PS.prefs.notifvolume}%` : `muted`}</span></label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"notifvolume\" value={PS.prefs.notifvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input type=\"checkbox\" name=\"mute\" checked={PS.prefs.mute} onChange={this.setMute} /> Mute all</label>\r\n\t\t\t</p>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.roomTypes['volume'] = {\r\n\tComponent: VolumePanel,\r\n};\r\n\r\nclass OptionsPanel extends PSRoomPanel {\r\n\tsetTheme = (e: Event) => {\r\n\t\tconst theme = (e.currentTarget as HTMLSelectElement).value as 'light' | 'dark' | 'system';\r\n\t\tPS.prefs.set('theme', theme);\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\trender() {\r\n\t\tconst room = this.props.room;\r\n\t\treturn <PSPanelWrapper room={room}>\r\n\t\t\t<h3>Graphics</h3>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">Theme: <select onChange={this.setTheme}>\r\n\t\t\t\t\t<option value=\"light\" selected={PS.prefs.theme === 'light'}>Light</option>\r\n\t\t\t\t\t<option value=\"dark\" selected={PS.prefs.theme === 'dark'}>Dark</option>\r\n\t\t\t\t\t<option value=\"system\" selected={PS.prefs.theme === 'system'}>Match system theme</option>\r\n\t\t\t\t</select></label>\r\n\t\t\t</p>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.roomTypes['options'] = {\r\n\tComponent: OptionsPanel,\r\n};\r\n"],"mappings":"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"}